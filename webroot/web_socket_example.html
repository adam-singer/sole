<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Web socket example</title>
	<script>
		window.onload = init;

		function query(q) {
			return document.querySelector(q);
		}

		function init() {

			var ws = new WebSocket("ws://localhost:8080/session", ["pginspect"]);

			ws.onopen = function() {
				console.log('Web socket connected.');
			};

			ws.onmessage = function(event) {
				console.log('Received data from web socket: "' + event.data + '"', event);
			};

			ws.onerror = function(error) {
				console.log('Web socket error: ' + error);
			};

			ws.onclosed = function() {
				console.log('Web socket closed.');
			};

			query('#send').onclick = function() {
				var val = query('#text').value;
				ws.send(val);
			};
		}
	</script>
	<style>
		#text { display: block; }
	</style>
</head>
<body>
	<textarea id="text"></textarea>
	<button id="send">Send</button>
</body>
</html>