<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>tables</title>
        <script src="jquery-1.9.1.min.js">
        <script>

            var tables = [
            {name: "test_table",
             columns: [
                {name: "blah"},
                {name: "other"}
             ]}
            ];

            var database = {
                    name: "testdb",
                    schemas: [
                        {name: "public", tables: tables}
                    ]};

            function getAllNames(database) {
                var names = [];
                names.push(database.name);
                for (var i = 0, schema; schema = database.schemas[i]; i++) {
                    names.push(schema.name);
                    for (var j = 0, table; table = schema.tables[j]; j++) {
                        names.push(table.name);
                        for (var k = 0, column; column = table.columns[k]; k++) {
                            names.push(column.name);
                        }
                    }
                }
                return names;
            }

            // Returns a jQuery defered object which returns the database schema.
            function loadDatabaseSchema() {
                var def = $.Defered();
                $.get("/schema")
                    .done(function(result) {
                        alert(result);
                        var schema = {};
                        def.resolve(schema);
                    })
                    .fail(def.fail);
                return def.promise();
            }

            window.onload = function() {
                var node = document.createTextNode(getAllNames(database).join(", "));
                document.body.appendChild(node);
            };
        </script>
    </head>
    <body>
    </body>
</html>